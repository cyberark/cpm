---
# tasks file for cpm_extract

- name: Find all inf files
  win_find:
    paths: "{{ cpm_installation_path }}\\Logs"
    patterns: ['*.*']
  register: files_to_delete

- win_file:
    path: "{{item.path}}"
    state: absent
  with_items: "{{ files_to_delete.files }}"

- name: Clean Windows\\Temp Folder
  win_find:
    paths: "C:\\Windows\\Temp"
    patterns: ['CPM*.*', 'InstallationAutomation*.*']
  register: files_to_delete

- win_file:
    path: "{{item.path}}"
    state: absent
  with_items: "{{ files_to_delete.files }}"

- win_file:
    path: "{{ cpm_extract_folder }}"
    state: absent
